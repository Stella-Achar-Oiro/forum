{{define "content"}}
<div class="posts-container">
    <div class="posts-header">
        <h1>Recent Posts</h1>
        <div class="filters">
            <select id="category-filter" class="form-input">
                <option value="">All Categories</option>
                {{range .Categories}}
                    <option value="{{.Name}}" {{if eq $.SelectedCategory .Name}}selected{{end}}>{{.Name}}</option>
                {{end}}
            </select>
        </div>
    </div>

    {{if .Posts}}
        {{range .Posts}}
            <article class="post card">
                <div class="post-header">
                    <h2 class="post-title">
                        <a href="/posts/{{.ID}}">{{.Title}}</a>
                    </h2>
                    <div class="post-meta">
                        Posted by {{.Username}} on {{.CreatedAt.Format "Jan 02, 2006"}}
                    </div>
                </div>
                
                <div class="post-content">
                    {{.Content}}
                </div>

                <div class="post-footer">
                    <div class="categories">
                        {{range .Categories}}
                            <span class="category">{{.}}</span>
                        {{end}}
                    </div>
                    
                    <div class="interactions">
                        <button class="btn btn-text like-button {{if .UserLiked}}active{{end}}" 
                                data-type="post" 
                                data-id="{{.ID}}">
                            <span class="count">{{.Likes}}</span> Likes
                        </button>
                        <button class="btn btn-text dislike-button {{if .UserDisliked}}active{{end}}" 
                                data-type="post" 
                                data-id="{{.ID}}">
                            <span class="count">{{.Dislikes}}</span> Dislikes
                        </button>
                        <a href="/posts/{{.ID}}#comments" class="btn btn-text">
                            Comments
                        </a>
                    </div>
                </div>
            </article>
        {{end}}
    {{else}}
        <div class="card text-center">
            <p>No posts found. {{if .User}}<a href="/posts/new">Create one!</a>{{end}}</p>
        </div>
    {{end}}
</div>
{{end}} 